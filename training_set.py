import os
import sys

def parseInstructions(o,i,i_path):
    lines = o.readlines()

    for line in lines:
        if ("..." in line):
            continue

        if(len(line.split('\t')) >= 3):
            command = line.split('\t')[2]
            instruction = command.split(" ")[0]
        else:
            continue

        i.write(instruction + '\n')

    i.close()

    # same file you just closed but opened read-only
    instructions = open(i_path, "r")
    i = instructions.read()

    # texts is a list of all of the instructions
    texts = [word for word in i.lower().split("\n")]

    # remove empty items from texts
    for text in texts:
        if (text == " ") or (text == ""):
            texts.remove(text)

    line = ""
    for text in texts:
        line = line + " " + text
    
    return line

os.chdir("training_samples")

train_corp_doc = open("train_corp_doc.txt", "w+")

files = os.listdir(".")

for file in files:
	if not file.endswith(".txt"):
		files.remove(file)
	elif "train" in file:
		files.remove(file)
	elif "parsed" in file:
		files.remove(file)

os.system("mkdir parsedInstructions")

for file in files:
	i_path = "./parsedInstructions/" + file[:-4] + "_INSTRUCTIONS.txt"
	o = open(file, 'r')
	i = open(i_path, 'w+')

	l = parseInstructions(o,i,i_path)
	train_corp_doc.write(l)
	train_corp_doc.write('\n')

	o.close()
	i.close()