import os
import gensim
import pprint
from gensim import corpora
from collections import defaultdict

os.chdir('samples/equationGroup')
objdump = open('triple_fantasy.txt', 'r')
instructions = open("triple_fantasy_instructions.txt", "w+")

def parseInstructions(o,i):
    lines = o.readlines()

    for line in lines:
        if ("..." in line):
            continue

        if(len(line.split('\t')) >= 3):
            instruction = line.split('\t')[2]
        else:
            continue

        i.write(instruction)

    i.close()
    instructions = open("triple_fantasy_instructions.txt", "r")
    i = instructions.read()
    texts = [word for word in i.lower().split("\n")]
    j = []
    for text in texts:
        text = text.split(" ")
        text = [string for string in text if string != ""]
        for k in text:
            j.append(k)

    instructions.close()

    return j

def languageAnalysis(i):
    frequency = defaultdict(int)
    for token in i:
        frequency[token] += 1

    processed_corpus = [token for token in i if frequency[token] > 1]
    pprint.pprint(processed_corpus)
    print("********************")

    dictionary = corpora.Dictionary(processed_corpus)
    print(dictionary)

i = parseInstructions(objdump, instructions)

objdump.close()

languageAnalysis(i)
